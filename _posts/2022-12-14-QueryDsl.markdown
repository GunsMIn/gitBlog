> ### ë™ì ì¿¼ë¦¬ë€? 
ë™ì ì¿¼ë¦¬ë€ ì‹¤í–‰ì‹œì— ì¿¼ë¦¬ë¬¸ì¥ì´ ë§Œë“¤ì–´ì ¸ ì‹¤í–‰ë˜ëŠ” ì¿¼ë¦¬ë¬¸ì„ ë§í•œë‹¤. ì¿¼ë¦¬ë¬¸ì´ ë³€í•˜ëƒ ë³€í•˜ì§€ ì•ŠëŠëƒì— ë”°ë¼ ë³€í•˜ì§€ ì•Šìœ¼ë©´ ì •ì ì¿¼ë¦¬ ë³€í•œë‹¤ë©´ ë™ì ì¿¼ë¦¬ì´ë‹¤. ëŒ€ë¶€ë¶„ ë™ì ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í• ë•Œì—ëŠ” í…ìŠ¤íŠ¸ë¬¸ì¥ìœ¼ë¡œ ì¿¼ë¦¬ë¬¸ì„ ê°€ì§€ê³  ìˆë‹¤ê°€ ì‹¤í–‰í• ë•Œë§ˆë‹¤ í…ìŠ¤íŠ¸ ì¿¼ë¦¬ë¬¸ì¥ì„ ë°”ê¿”ì„œ ì‹¤í–‰í•˜ëŠ” ë°©ì‹ì„ ì‚¬ìš©í•œë‹¤. ì£¼ë¡œ ê²€ìƒ‰ì— ìˆì–´ì„œ ë™ì  ì¿¼ë¦¬ê°€ ë§ì´ ì‚¬ìš©ë˜ì–´ì§„ë‹¤.

ì˜ˆë¥¼ë“¤ì–´ì„œ íšŒì›ì˜ ì´ë¦„ê³¼ ë‚˜ì´ë¡œ ê²€ìƒ‰í•˜ëŠ” ë™ì  ì¿¼ë¦¬ê°€ ìˆë‹¤ê³  ìƒê°í•´ë³´ì.
- name ê°’ì´ ë“¤ì–´ì˜¤ê³  ageëŠ” nullì´ë¼ë©´  WHERE name = ${name}
- age ê°’ì´ ë“¤ì–´ì˜¤ê³  nameì€ nullì´ë¼ë©´  WHERE age = ${age}
- nameê³¼ ageê°€ ëª¨ë‘ ë“¤ì–´ì˜¤ë©´ WHERE name = ${name}  AND age = ${age} ì´ë‹¤.
- nameê³¼ age ëª¨ë‘ ë“¤ì–´ì˜¤ì§€ ì•Šìœ¼ë©´(null) WHERE ì ˆì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.

>ì—¬ê¸°ì„œ **nullë¡œ ë“¤ì–´ì˜¬ì‹œ ë™ì ì¿¼ë¦¬ëŠ” whereì— nullì´ ìˆë‹¤ë©´ ê·¸ëƒ¥ ë¬´ì‹œê°€ ëœë‹¤.** ê·¸ë˜ì„œ ë™ì ì¿¼ë¦¬ê°€ ì‘ìš©í•˜ëŠ”ê²ƒì´ê³  ì´ê²ƒì´ êµ‰ì¥í•œ í‚¤í¬ì¸íŠ¸ì´ë‹¤.

## BooleanBulider ì‚¬ìš©í•˜ê¸°
> **BooleanBuilderë€?**
ì¿¼ë¦¬ì˜ ì¡°ê±´ ì„¤ì •ì¸ whereë’¤ì˜ ì¡°ê±´ì„ ìƒì„±í•´ì£¼ëŠ” ê²ƒì´ë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤. íŒŒë¼ë¯¸í„°ë¡œ ë“¤ì–´ì˜¤ëŠ” ê°’ì´ ì¡´ì¬í•  ë•Œ(nullì´ ì•„ë‹Œ ìƒí™©) ìƒì„±ëœ BooleanBuliderì— builder íŒ¨í„´ìœ¼ë¡œ whereì˜ ì¡°ê±´ì„ ì¶”ê°€í•´ì£¼ëŠ” ê²ƒì´ë‹¤.
***
**BooleanBuliderë¥¼ ì‚¬ìš©í•  ì‹œ keyPoint** 
- where()ì— **nullì´ ë“¤ì–´ì˜¤ë©´ ë¬´ì‹œ**í•œë‹¤.(ì´ ê¸°ëŠ¥ ë•Œë¬¸ì— ë™ì ì¿¼ë¦¬ ë™ì‘ ê°€ëŠ¥)
- where()ì— and ì¡°ê±´ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤

* ë‹¤ìŒì˜ ì½”ë“œëŠ” íšŒì›ì˜ ì´ë¦„ê³¼ ë‚˜ì´ë¡œ ê²€ìƒ‰ì„ í•˜ëŠ” ë™ì  ì¿¼ë¦¬ì´ë‹¤.
```java
    @Test
    @DisplayName("@BooleanBulider ì‚¬ìš© ë™ì ì¿¼ë¦¬")
    void dynamicQuery_BooleanBuilder() throws Exception {
        //ê²€ìƒ‰ ì¡°ê±´
        String usernameParam = "member1";
        Integer ageParam = 10;

        List<Member> members = searchMember1(usernameParam, ageParam);

        assertThat(members.size()).isEqualTo(1);


    }
```
- BooleanBuliderë¥¼ ì‚¬ìš©í•œ ë™ì ì¿¼ë¦¬ ë©”ì„œë“œ
```java
 private List<Member> searchMember1(String usernameCond,Integer ageCond) {
        BooleanBuilder builder = new BooleanBuilder();
        //usernameCond ì— ê°’ì´ ìˆìœ¼ë©´ BooleanBuilderì— and ì¡°ê±´ì„ ë„£ì–´ ì¤€ ê²ƒì´ë‹¤.
        if (usernameCond != null) { //<- ì•ì„œ ë§í•œ nullì´ ì•„ë‹ ë•Œì˜ ì¡°ê±´ 
            builder.and(member.username.eq(usernameCond));
        }
        if (ageCond != null) { //<- ì•ì„œ ë§í•œ nullì´ ì•„ë‹ ë•Œì˜ ì¡°ê±´ 
            builder.and(member.age.eq(ageCond));
        }
        return jpaQueryFactory
                .selectFrom(member)
                .where(builder) // <- ìƒì„±ëœ BooleanBuliderì˜ where ì¡°ê±´ì„ ë„£ì–´ì£¼ì
                .fetch();
    }
```
> **BooleanBuilderì˜ ì¡´ì¬í•˜ëŠ” ë‹¨ì **
ë¬¸ì œì ì€ whereì ˆì„ í†µì§¸ë¡œ ë³´ê¸°ê°€ ì–´ë µë‹¤. ì§€ê¸ˆì€ 2ê°œì˜ ì¡°ê±´ì´ë¼ì„œ ê°€ë…ì„±ì˜ í° ë¬¸ì œê°€ ì—†ì„ ìˆ˜ ìˆì§€ë§Œ ì¡°ê±´ì´ ë§ì„ìˆ˜ë¡ ë¡œì§ì„ ë”°ë¼ê°€ë©´ì„œ ì‹ ê²½ì„ ê¸°ìš¸ì—¬ì•¼ ì¿¼ë¦¬ë¬¸ì„ ì´í•´í•  ìˆ˜ ìˆë‹¤. 

## BooleanExpression ì‚¬ìš©í•˜ê¸°

ì•ì„œ BooleanBuilderëŠ” ê°€ë…ì„±ì˜ ë‹¨ì ì´ ì¡´ì¬í•œë‹¤ê³  í•˜ì˜€ë‹¤. ì´ëŸ¬í•œ ê°€ë…ì„± ë¬¸ì œë¥¼ íƒ€íŒŒí•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ë°”ë¡œ BooleanExpressionì´ë‹¤. ìš°ì„  ì½”ë“œë¥¼ ë³´ê¸°ì „ì— ì´ ì½”ë“œëŠ” ë©”ì†Œë“œê°€ ë§ì•„ì„œ ì˜¤íˆë ¤ ë©˜ë¶•ì´ ì˜¤ê±°ë‚˜ ì´ ì „ì˜ ë°©ë²•ì„ ì‚¬ìš©í•˜ê³ ì‹¶ë‹¤ë¼ëŠ” ìƒê°ì´ ë“¤ ìˆ˜ìˆë‹¤. í•˜ì§€ë§Œ ìœ ì§€ë³´ìˆ˜ë‚˜ ë©”ì†Œë“œì˜ ì¡°ë¦½ ì¸¡ë©´ì—ì„œ ì´ ë°©ë²•ì´ ë” ë‚˜ì€ ë°©ë²•ì´ë‹¤. ì§€ê¸ˆì€ ìš°ì„  where() ì¡°ê±´ ì•ˆì— ë©”ì†Œë“œë¡œ ì¡°ê±´ì„ ë„£ì–´ì¤€ë‹¤ê³  ìƒê°í•˜ì.

- where ë‹¤ì¤‘ íŒŒë¼ë¯¸í„° ì‚¬ìš© 
```java
    @Test
    @DisplayName("Where ë‹¤ì¤‘ íŒŒë¼ë¯¸í„° ì‚¬ìš© ")
    void dynamicQuery_WhereParam() throws Exception {
        //ê²€ìƒ‰ ì¡°ê±´
        String usernameParam = "member2";
        Integer ageParam = 20;
        
        List<Member> members = searchMember2(usernameParam, ageParam);

        assertThat(members.size()).isEqualTo(1);
    }
```
testì½”ë“œë¥¼ ë§Œë“¤ì–´ ì£¼ì—ˆë‹¤ searchMember2ë¼ëŠ” ë©”ì„œë“œì— usernameê³¼ ageì˜ íŒŒë¼ë¯¸í„°ë¥¼ ë„£ì–´ì£¼ì—ˆë‹¤. ê¸°ëŒ€ ë°˜í™˜ íƒ€ì…ì€ Member íƒ€ì…ì˜ listì´ë‹¤. 
- searchMember2 ë©”ì„œë“œğŸ”½
```java
  private List<Member> searchMember2(String usernameCond, Integer ageCond) {
        return jpaQueryFactory
                .selectFrom(member) // whereì— nullì´ ìˆë‹¤ë©´ ê·¸ëƒ¥ ë¬´ì‹œê°€ëœë‹¤. ê·¸ë˜ì„œ ë™ì ì¿¼ë¦¬ê°€ ì‘ìš©í•˜ëŠ”ê²ƒ
                .where(usernameEq(usernameCond),ageEq(ageCond)) // allEq(usernameCond,ageCond) ì´ë ‡ê²Œë„ ì‚¬ìš©ê°€ëŠ¥!
                .fetch();
    }
```
ì•ì„œ ë§í•œ ë©”ì†Œë“œê°€ ë§ì•„ì„œ ë©˜ë¶•ì´ ì˜¬ ìˆ˜ìˆë‹¤ê³  í–ˆì—ˆëŠ”ë° , ê·¸ëŸ°ìƒê°ì„ ê°–ì§€ë§ì. where() ì¡°ê±´ì•ˆë° 2ê°œì˜ ë©”ì„œë“œë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë„£ì–´ì¤€ ê²ƒì´ë‹¤. ìë°”ë¥¼ ì²˜ìŒ ë°°ìš¸ ë•Œ ë‚˜ëŠ” ì–´ë– í•œ ê°•ì‚¬ë‹˜ì´ ë©”ì†Œë“œëŠ” ë­ë¼ê³  ìƒê°í•˜ëƒë¼ê³  ë‚˜ì—ê²Œ ì—¬ì­¤ë³¸ì ì´ìˆë‹¤. ê·¸ë•Œì˜ ì‹ ì„ í•œ ì¶©ê²©ê³¼ ê°•ì‚¬ë‹˜ì˜ ë‹µë³€ì´ ë‚˜ëŠ” ì•„ì§ ê¸°ì–µì— ë‚¨ëŠ”ë‹¤. **ë©”ì„œë“œëŠ” ê°’ì„ ë‹´ëŠ” ë³´ì´ì§€ ì•ŠëŠ” ë³€ìˆ˜ì´ë‹¤.** ë¼ê³  ë§ì”€í•˜ì‹ ê²Œ ê¸°ì–µì— ë‚¨ëŠ”ë‹¤. ë¬¼ë¡  ë‹¤ë¥¸ ëª©ì ë„ ì¡´ì¬í•˜ì§€ë§Œ ì—¬ê¸°ì„œëŠ” ë©”ì„œë“œëŠ” ê°’ì„ ë‹´ëŠ” ë³€ìˆ˜ë¼ê³  ìƒê°í•˜ê³  ì²«ë²ˆì§¸ ë©”ì„œë“œëŠ” userNameì˜ ê°’ì„ ë‹´ê³ ìˆê³  ë‘ë²ˆì§¸ ë©”ì„œë“œëŠ” ageë¥¼ ë‹´ê³  ìˆë‹¤ê³  ìƒê°í•˜ì.
- usernameì˜ ê°’ì„ ë‹´ì€ usernameEq ë©”ì„œë“œ ğŸ”½
```java
 private BooleanExpression usernameEq(String usernameCond) {
        //usernameCondê°€ nullì´ë©´ nullì„ ë°˜í™˜
        return usernameCond != null ? member.username.eq(usernameCond) : null;
    }
```
- ageì˜ ê°’ì„ ë‹´ì€ usernameEq ë©”ì„œë“œ ğŸ”½
```java
  private BooleanExpression ageEq(Integer ageCond) {
        if(ageCond == null) return null;
        return member.age.eq(ageCond);
    }
```
> **keyPoint**
ì‚¼í•­ ì—°ì‚°ìë¥¼ ì‚¬ìš©í•˜ì—¬ nullì´ ë“¤ì–´ì˜¬ ë•Œì—ëŠ” nullë¡œ ë°˜í™˜ì„ í•´ì£¼ê³  ê°’ì´ ìˆì„ë•ŒëŠ” whereì˜ ì¡°ê±´ì„ ë°˜í™˜í•˜ê²Œ í•´ì£¼ì—ˆë‹¤. (ë™ì ì¿¼ë¦¬ì˜ í‚¤í¬ì¸íŠ¸ëŠ” whereì— nullì´ ìˆë‹¤ë©´ ê·¸ëƒ¥ ë¬´ì‹œ) ê·¸ë¦¬ê³  í•´ë‹¹ ë©”ì„œë“œë¥¼ ì²˜ìŒ ë§Œë“¤ì—ˆì„ ë•Œì—ëŠ” Predicate ë¦¬í„´ íƒ€ì…ì¸ë° BooleanExpression ë¦¬í„´ íƒ€ì…ìœ¼ë¡œ ë°”ê¾¸ì–´ì£¼ì! 

BooleanExpression ì„ ì´ˆë°˜ì— ì„¤ëª…í•  ë•Œ __ì¡°ë¦½ì„ ìœ„í•´ì„œ__ ë¼ê³  í•œì ì´ ìˆë‹¤. ê·¸ë¦¬ê³  ë°”ë¡œ ì•ì„œ Predicate íƒ€ì…ì„ BooleanExpression íƒ€ì…ìœ¼ë¡œ ë°”ê¾¸ë¼ê³  í•˜ì˜€ë‹¤. ê·¸ì´ìœ ê°€ ì´ì œ ë‚˜ì˜¨ë‹¤. ë°”ë¡œ ë©”ì„œë“œì˜ ì¡°ë¦½ì„ ìœ„í•´ì„œì´ë‹¤. 
```java
private List<Member> searchMember2(String usernameCond, Integer ageCond) {
        return jpaQueryFactory
                .selectFrom(member) // whereì— nullì´ ìˆë‹¤ë©´ ê·¸ëƒ¥ ë¬´ì‹œê°€ëœë‹¤. ê·¸ë˜ì„œ ë™ì ì¿¼ë¦¬ê°€ ì‘ìš©í•˜ëŠ”ê²ƒ
                .where(usernameEq(usernameCond),ageEq(ageCond)) // allEq(usernameCond,ageCond) ì´ë ‡ê²Œë„ ì‚¬ìš©ê°€ëŠ¥!
                .fetch();
    }
```
where() ë¬¸ì— 2ê°œì˜ ë©”ì„œë“œê°€ ë“¤ì–´ê°€ìˆë‹¤. ë‹¤ì‹œ ìƒê°í•´ë³´ë©´ 2ê°œì˜ ë©”ì„œë“œë¥¼ í•œê°œì˜ ë©”ì„œë“œë¡œ í•©ì¹  ìˆ˜ ìˆëŠ”ê²ƒì´ë‹¤. ê·¸ë˜ì„œ ë©”ì„œë“œì˜ ë¦¬í„´íƒ€ì…ì€ BooleanExpressionë¡œ í•´ì£¼ì–´ì•¼í•œë‹¤,. 
ë‹¤ìŒì˜ ë©”ì„œë“œëŠ” ì•ì„œ usernameEq() ì™€ ageEq()ë©”ì„œë“œë¥¼ í•©ì¹œ ë©”ì„œë“œì´ë‹¤.
```java
 private BooleanExpression allEq(String usernameCond, Integer ageCond) {
        return usernameEq(usernameCond).and(ageEq(ageCond));
    }
```
ê·¸ëŸ¬ë©´ ì´ì œ ë‹¤ìŒê³¼ ê°™ì´ í•˜ë‚˜ì˜ ë©”ì„œë“œë¡œ where()ë¬¸ ì•ˆì— í‘œí˜„í•  ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤.
```java
  private List<Member> searchMember2(String usernameCond, Integer ageCond) {
        return jpaQueryFactory
                .selectFrom(member) // whereì— nullì´ ìˆë‹¤ë©´ ê·¸ëƒ¥ ë¬´ì‹œê°€ëœë‹¤. ê·¸ë˜ì„œ ë™ì ì¿¼ë¦¬ê°€ ì‘ìš©í•˜ëŠ”ê²ƒ
                .where(allEq(usernameCond,ageCond)) // allEq(usernameCond,ageCond)
                .fetch();
    }

```
- ì‹¤í–‰ëœ ì¿¼ë¦¬ë¬¸ ğŸ”½
```sql
   select
        member0_.member_id as member_i1_0_,
        member0_.age as age2_0_,
        member0_.team_id as team_id4_0_,
        member0_.username as username3_0_ 
    from
        member member0_ 
    where
        member0_.username=? 
        and member0_.age=?
```
- ë™ì ì¿¼ë¦¬ where ì¡°ê±´ì— nullì´ ë“¤ì–´ì˜¤ë©´? (ì—¬ê¸°ì„œëŠ” ì˜ˆë¥¼ ë“¤ì–´ì„œ userNameì´ nullë¡œ ë“¤ì–´ì™”ë‹¤ í•´ë³´ê² ë‹¤.) 

```sql
select
        member0_.member_id as member_i1_0_,
        member0_.age as age2_0_,
        member0_.team_id as team_id4_0_,
        member0_.username as username3_0_ 
    from
        member member0_ 
    where
        member0_.age=?
```

> userNameì— nullì„ ì£¼ê³  sqlë¬¸ì„ ë³´ë©´ whereì¡°ê±´ì— ageë§Œ ì¡°ê±´ì— ë“¤ì–´ê°„ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. 
ëª…ì‹¬í•˜ì! ë™ì ì¿¼ë¦¬ëŠ” whereì˜ ì¡°ê±´ì— **nullì´ ë“¤ì–´ê°„ë‹¤ë©´ sqlì—ì„œ ì•Œì•„ì„œ ë¬´ì‹œê°€ ëœë‹¤**